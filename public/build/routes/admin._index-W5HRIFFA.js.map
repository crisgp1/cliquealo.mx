{
  "version": 3,
  "sources": ["empty-module:~/lib/db.server", "../../../app/routes/admin._index.tsx"],
  "sourcesContent": ["module.exports = {};", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\admin._index.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\admin._index.tsx\");\n  import.meta.hot.lastModified = \"1748918675058.985\";\n}\n// REMIX HMR END\n\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData, Link } from \"@remix-run/react\";\nimport { requireSuperAdmin } from \"~/lib/auth.server\";\nimport { db } from \"~/lib/db.server\";\nimport { UserModel } from \"~/models/User\";\nimport { ListingModel } from \"~/models/Listing\";\nimport { Users, Car, TrendingUp, Plus } from 'lucide-react';\nexport async function loader({\n  request\n}) {\n  await requireSuperAdmin(request);\n  const [users, listings] = await Promise.all([UserModel.findAll({\n    limit: 20,\n    skip: 0\n  }), ListingModel.findMany({\n    limit: 20\n  })]);\n  const stats = {\n    totalUsers: await db.collection('users').countDocuments({\n      isActive: true\n    }),\n    totalListings: await db.collection('listings').countDocuments(),\n    totalAdmins: await db.collection('users').countDocuments({\n      role: {\n        $in: ['admin', 'superadmin']\n      }\n    })\n  };\n  return json({\n    users,\n    listings,\n    stats\n  });\n}\nexport default function AdminDashboard() {\n  _s();\n  const {\n    users,\n    listings,\n    stats\n  } = useLoaderData();\n  return <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-light text-gray-900 mb-2\">\r\n            Panel de Administraci\u00F3n\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Gestiona usuarios y listings de la plataforma\r\n          </p>\r\n        </div>\r\n\r\n        {/* Stats */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n          <div className=\"bg-white p-6 rounded-xl border border-gray-200\">\r\n            <div className=\"flex items-center\">\r\n              <Users className=\"w-8 h-8 text-blue-600\" />\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Total Usuarios</p>\r\n                <p className=\"text-2xl font-light text-gray-900\">{stats.totalUsers}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"bg-white p-6 rounded-xl border border-gray-200\">\r\n            <div className=\"flex items-center\">\r\n              <Car className=\"w-8 h-8 text-green-600\" />\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Total Listings</p>\r\n                <p className=\"text-2xl font-light text-gray-900\">{stats.totalListings}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"bg-white p-6 rounded-xl border border-gray-200\">\r\n            <div className=\"flex items-center\">\r\n              <TrendingUp className=\"w-8 h-8 text-purple-600\" />\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Administradores</p>\r\n                <p className=\"text-2xl font-light text-gray-900\">{stats.totalAdmins}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n          {/* Recent Users */}\r\n          <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-lg font-medium text-gray-900\">Usuarios Recientes</h2>\r\n              <Link to=\"/admin/users\" className=\"text-sm text-blue-600 hover:text-blue-700\">\r\n                Ver todos\r\n              </Link>\r\n            </div>\r\n            \r\n            <div className=\"space-y-3\">\r\n              {users.slice(0, 5).map(user => <div key={user._id} className=\"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg\">\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900\">{user.name}</p>\r\n                    <p className=\"text-sm text-gray-500\">{user.email}</p>\r\n                  </div>\r\n                  <span className={`px-2 py-1 text-xs rounded-full ${user.role === 'admin' || user.role === 'superadmin' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800'}`}>\r\n                    {user.role}\r\n                  </span>\r\n                </div>)}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Recent Listings */}\r\n          <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-lg font-medium text-gray-900\">Listings Recientes</h2>\r\n              <Link to=\"/listings/new\" className=\"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700\">\r\n                <Plus className=\"w-4 h-4\" />\r\n                Crear\r\n              </Link>\r\n            </div>\r\n            \r\n            <div className=\"space-y-3\">\r\n              {listings.slice(0, 5).map(listing => <Link key={listing._id} to={`/listings/${listing._id}`} className=\"block p-3 hover:bg-gray-50 rounded-lg transition-colors\">\r\n                  <p className=\"font-medium text-gray-900\">{listing.title}</p>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    ${listing.price.toLocaleString()} \u2022 {listing.brand} {listing.model}\r\n                  </p>\r\n                </Link>)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>;\n}\n_s(AdminDashboard, \"/gqjeRH4uH+PEKProNbaSIONBjw=\", false, function () {\n  return [useLoaderData];\n});\n_c = AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
