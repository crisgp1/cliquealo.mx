{
  "version": 3,
  "sources": ["../../../app/routes/favorites.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\favorites.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\favorites.tsx\");\n  import.meta.hot.lastModified = \"1749341128337.4448\";\n}\n// REMIX HMR END\n\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData, Link, useFetcher } from \"@remix-run/react\";\nimport { UserModel } from \"~/models/User\";\nimport { requireUser } from \"~/lib/session.server\";\nimport { toast } from \"~/components/ui/toast\";\nimport { Heart, Eye, ArrowRight, Calendar, ArrowLeft, Car } from 'lucide-react';\nimport { useEffect } from 'react';\n\n// Tipo para la respuesta del action\n\nexport async function loader({\n  request\n}) {\n  const user = await requireUser(request);\n\n  // Obtener todos los listings que el usuario ha marcado como favoritos\n  const likedListings = await UserModel.getLikedListings(user._id.toString(), 50);\n  return json({\n    user,\n    likedListings,\n    totalLikes: likedListings.length\n  });\n}\n\n// Action para quitar favoritos\nexport async function action({\n  request\n}) {\n  const user = await requireUser(request);\n  const formData = await request.formData();\n  const intent = formData.get(\"intent\");\n  const listingId = formData.get(\"listingId\");\n  if (!listingId) {\n    return json({\n      error: \"ID del listing requerido\"\n    }, {\n      status: 400\n    });\n  }\n  try {\n    if (intent === \"unlike\") {\n      const success = await UserModel.unlikeListing(user._id.toString(), listingId);\n      if (success) {\n        return json({\n          success: true,\n          action: \"unliked\",\n          listingId\n        });\n      } else {\n        return json({\n          error: \"No se pudo quitar el like\"\n        }, {\n          status: 400\n        });\n      }\n    }\n    return json({\n      error: \"Acci\u00F3n no v\u00E1lida\"\n    }, {\n      status: 400\n    });\n  } catch (error) {\n    console.error(\"Error en action:\", error);\n    return json({\n      error: \"Error interno del servidor\"\n    }, {\n      status: 500\n    });\n  }\n}\n\n// Componente para el bot\u00F3n de quitar favorito\nfunction RemoveFavoriteButton({\n  listing\n}) {\n  _s();\n  const fetcher = useFetcher();\n  const isLoading = fetcher.state !== \"idle\";\n\n  // Mostrar feedback del fetcher\n  useEffect(() => {\n    if (fetcher.data) {\n      const data = fetcher.data;\n\n      // Solo mostrar toast si es para este listing\n      if (data?.listingId === listing._id) {\n        if (data?.error) {\n          toast.error(data.error);\n        } else if (data?.success && data.action === \"unliked\") {\n          toast.success(\"Removido de favoritos\");\n        }\n      }\n    }\n  }, [fetcher.data, listing._id]);\n  return <fetcher.Form method=\"post\" style={{\n    display: 'inline'\n  }}>\r\n      <input type=\"hidden\" name=\"intent\" value=\"unlike\" />\r\n      <input type=\"hidden\" name=\"listingId\" value={listing._id} />\r\n      <button type=\"submit\" disabled={isLoading} className={`p-2 rounded-full transition-all duration-200 bg-red-100 text-red-600 hover:bg-red-200 ${isLoading ? 'opacity-50 cursor-not-allowed animate-pulse' : 'hover:scale-105'}`} title=\"Quitar de favoritos\">\r\n        <Heart className=\"w-5 h-5 fill-current\" />\r\n      </button>\r\n    </fetcher.Form>;\n}\n_s(RemoveFavoriteButton, \"WjihN4CabdhkHDxQoVW7dBj/pPI=\", false, function () {\n  return [useFetcher];\n});\n_c = RemoveFavoriteButton;\nexport default function Favorites() {\n  _s2();\n  const {\n    user,\n    likedListings,\n    totalLikes\n  } = useLoaderData();\n  return <div className=\"min-h-screen bg-white\">\r\n      {/* Header */}\r\n      <header className=\"border-b border-gray-100\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex items-center justify-between h-16\">\r\n            <Link to=\"/\" className=\"flex items-center space-x-3 text-gray-600 hover:text-gray-900 transition-colors\">\r\n              <ArrowLeft className=\"w-5 h-5\" />\r\n              <span className=\"font-medium\">Volver al inicio</span>\r\n            </Link>\r\n\r\n            <Link to=\"/\" className=\"flex items-center space-x-3\">\r\n              <div className=\"w-6 h-6 bg-black rounded-full\"></div>\r\n              <span className=\"text-lg font-light tracking-tight text-gray-900\">\r\n                Cliquealo\r\n              </span>\r\n            </Link>\r\n\r\n            <div className=\"w-20\"></div> {/* Spacer for centering */}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n        {/* Page Header */}\r\n        <div className=\"text-center mb-12\">\r\n          <h1 className=\"text-4xl font-light text-gray-900 mb-4 tracking-tight\">\r\n            Mis Favoritos\r\n          </h1>\r\n          <p className=\"text-lg text-gray-600\">\r\n            {totalLikes > 0 ? `${totalLikes} auto${totalLikes !== 1 ? 's' : ''} guardado${totalLikes !== 1 ? 's' : ''} como favorito${totalLikes !== 1 ? 's' : ''}` : 'A\u00FAn no tienes autos favoritos'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Results */}\r\n        {likedListings.length > 0 ? <div className=\"grid gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\">\r\n            {likedListings.map(listing => <article key={listing._id} className=\"group\">\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gray-100 aspect-[4/3]\">\r\n                  {listing.images && listing.images.length > 0 ? <img src={listing.images[0]} alt={listing.title} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\" /> : <div className=\"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center\">\r\n                      <Car className=\"w-16 h-16 text-gray-300\" />\r\n                    </div>}\r\n                  \r\n                  {listing.year && <div className=\"absolute top-4 left-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-sm font-medium\">\r\n                      {listing.year}\r\n                    </div>}\r\n\r\n                  {/* Bot\u00F3n para quitar de favoritos */}\r\n                  <div className=\"absolute top-4 right-4\">\r\n                    <RemoveFavoriteButton listing={listing} />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"pt-6\">\r\n                  <div className=\"flex items-start justify-between mb-3\">\r\n                    <div className=\"flex-1\">\r\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-1 group-hover:text-gray-600 transition-colors\">\r\n                        {listing.title}\r\n                      </h3>\r\n                      {listing.brand && listing.model && <p className=\"text-sm text-gray-500\">\r\n                          {listing.brand} {listing.model}\r\n                        </p>}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <span className=\"text-2xl font-light text-gray-900\">\r\n                      ${listing.price ? listing.price.toLocaleString() : 0}\r\n                    </span>\r\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n                      {listing.likesCount && listing.likesCount > 0 && <span className=\"flex items-center space-x-1\">\r\n                          <Heart className=\"w-4 h-4\" />\r\n                          <span>{listing.likesCount}</span>\r\n                        </span>}\r\n                      <span className=\"flex items-center space-x-1\">\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        <span>{listing.viewsCount || 0}</span>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"text-sm text-gray-500\">\r\n                      <div className=\"flex items-center space-x-1 mb-1\">\r\n                        <Calendar className=\"w-3 h-3\" />\r\n                        <span>{new Date(listing.createdAt).toLocaleDateString()}</span>\r\n                      </div>\r\n                      {listing.owner?.name && <div>Por {listing.owner.name}</div>}\r\n                    </div>\r\n\r\n                    <Link to={`/listings/${listing._id}`} className=\"flex items-center space-x-2 text-gray-900 hover:text-gray-600 transition-colors font-medium group\">\r\n                      <span>Ver detalles</span>\r\n                      <ArrowRight className=\"w-4 h-4 group-hover:translate-x-0.5 transition-transform\" />\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </article>)}\r\n          </div> : <div className=\"text-center py-24\">\r\n            <div className=\"w-20 h-20 bg-gray-100 rounded-full mx-auto mb-8 flex items-center justify-center\">\r\n              <Heart className=\"w-8 h-8 text-gray-400\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-light text-gray-900 mb-4\">\r\n              A\u00FAn no tienes favoritos\r\n            </h3>\r\n            <p className=\"text-gray-600 mb-8 max-w-md mx-auto\">\r\n              Explora nuestro cat\u00E1logo y marca los autos que m\u00E1s te gusten como favoritos\r\n            </p>\r\n            \r\n            <Link to=\"/\" className=\"inline-flex items-center space-x-2 bg-gray-900 text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition-colors font-medium\">\r\n              <span>Explorar cat\u00E1logo</span>\r\n              <ArrowRight className=\"w-4 h-4\" />\r\n            </Link>\r\n          </div>}\r\n      </div>\r\n    </div>;\n}\n_s2(Favorites, \"2hrkmwg94XYUbAGj9HOurzvEWqM=\", false, function () {\n  return [useLoaderData];\n});\n_c2 = Favorites;\nvar _c, _c2;\n$RefreshReg$(_c, \"RemoveFavoriteButton\");\n$RefreshReg$(_c2, \"Favorites\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
